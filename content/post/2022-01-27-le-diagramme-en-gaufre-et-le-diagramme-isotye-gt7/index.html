---
title: Le diagramme en gaufre et le diagramme isotye GT7
author: Ludovic Vigneron
date: '2022-01-27'
slug: []
categories:
  - R
  - datavisualisation
tags:
  - GGPLOT2
  - Dataviz
  - R
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>
<script src="{{< blogdown/postref >}}index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="{{< blogdown/postref >}}index_files/echarts4r/echarts-en.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/echarts4r/ecStat.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/echarts4r/dataTool.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/echarts4r-binding/echarts4r.js"></script>
<script src="{{< blogdown/postref >}}index_files/westeros/westeros.js"></script>


<p><strong>Pour ce nouveau post de la série GT, qui se propose d’illustrer au travers de réalisation simple avec ggplot les différents type des graphes présentés par Jonathan Schwadish dans la série de vidéos <a href="https://www.youtube.com/playlist?list=PLfv89tPxlTiVIrwuSBCISiBaGSH1CJR5-">one chart at a time</a> , nous nous allons intéresser </strong></p>
<p>ils sont particulièrement utile pour visualiser des relations de type partie d’un tout.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<p>isotype international system of typographic picture education</p>
<p>le système utilise des images de gens ou d’objets aligné pour en colonne et en ligne pour montrer des différences concernant les quantités des ces choses.</p>
<p>la principale règle du système est que si un icome représente un fermier alors deux icomes identique représente deux fermiers (et non une icome deux fois plus grande que l’originale)
une plus grande quantité est représenté par un nombre plus important de symbole plutôt que des symboles plus grands.</p>
<p>unit chart utilise le même principe mais avec des symbôles abstraits carrés ronds etc..</p>
<p>les choses que l’on veut représenter ne sont pas forcéments facilement représenté par des symboles tailles des choses.</p>
<p>quand il y a les quantités sont grandes une unités du symbôle ou des figures représentes un grand nombre d’individus</p>
<p>iso type sont basiquement des barres charts horizontal avec des symboles pour figurer les quantité</p>
<pre class="r"><code>devtools::install_github(&quot;liamgilbey/ggwaffle&quot;)</code></pre>
<pre><code>## Skipping install of &#39;ggwaffle&#39; from a github remote, the SHA1 (78463265) has not changed since last install.
##   Use `force = TRUE` to force installation</code></pre>
<pre class="r"><code>library(ggwaffle)
waffle_data &lt;- waffle_iron(mpg, aes_d(group = class))

ggplot(waffle_data, aes(x, y, fill = group)) + 
  geom_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>iris$Species &lt;- as.character(iris$Species)
waffle_data &lt;- waffle_iron(iris, aes_d(group = Species))

ggplot(waffle_data, aes(x, y, fill = group)) + 
  geom_waffle() + 
  coord_equal() + 
  scale_fill_waffle() + 
  theme_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>library(emojifont)  
library(dplyr)

iris$Species &lt;- as.character(iris$Species)
waffle_data &lt;- waffle_iron(iris, aes_d(group = Species)) %&gt;% mutate(label = fontawesome(&#39;fa-twitter&#39;))

ggplot(waffle_data, aes(x, y, colour = group)) + 
  geom_text(aes(label=label), family=&#39;fontawesome-webfont&#39;, size=4) +
  coord_equal() + 
  scale_colour_waffle() + 
  theme_waffle()  </code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>df22 &lt;- data.frame(
  x = sort(LETTERS[1:5], decreasing = TRUE),
  y = sort(sample(20:80,5))
)</code></pre>
<pre class="r"><code>library(echarts4r)
library(echarts4r.assets)
ea_bank()</code></pre>
<pre><code>##  [1] &quot;clouds trans&quot;      &quot;clouds&quot;            &quot;world bw&quot;         
##  [4] &quot;world bump&quot;        &quot;composite 4k&quot;      &quot;elevation 4k&quot;     
##  [7] &quot;galaxy&quot;            &quot;jupiter&quot;           &quot;starfield&quot;        
## [10] &quot;world&quot;             &quot;world dark&quot;        &quot;world night&quot;      
## [13] &quot;world topo&quot;        &quot;canyon&quot;            &quot;lake&quot;             
## [16] &quot;pisa&quot;              &quot;leather albedo&quot;    &quot;leather height&quot;   
## [19] &quot;leather normal&quot;    &quot;leather roughness&quot; &quot;hatch0&quot;           
## [22] &quot;hatch1&quot;            &quot;hatch2&quot;            &quot;hatch3&quot;           
## [25] &quot;hatch4&quot;            &quot;hatch5&quot;</code></pre>
<pre class="r"><code>library(echarts4r)
library(echarts4r.assets)

df22 %&gt;% 
  e_charts(x) %&gt;% 
  e_pictorial(y, symbol = ea_icons(&quot;user&quot;), 
              symbolRepeat = TRUE, z = -1,
              symbolSize = c(20, 20)) %&gt;% 
  e_theme(&quot;westeros&quot;) %&gt;%
  e_title(&quot;People Icons&quot;) %&gt;% 
  e_flip_coords() %&gt;%
  # Hide Legend
  e_legend(show = FALSE) %&gt;%
  # Remove Gridlines
  e_x_axis(splitLine=list(show = FALSE)) %&gt;%
  e_y_axis(splitLine=list(show = FALSE)) %&gt;%
  # Format Label
  e_labels(fontSize = 16, fontWeight =&#39;bold&#39;, position = &quot;right&quot;, offset=c(10, 0))</code></pre>
<div id="htmlwidget-1" style="width:100%;height:500px;" class="echarts4r html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"theme":"westeros","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"xAxis":[{"show":true,"splitLine":{"show":false}}],"yAxis":[{"data":["E","D","C","B","A"],"type":"category","boundaryGap":true,"splitLine":{"show":false}}],"legend":{"data":["y"],"show":false,"type":"plain"},"series":[{"data":[{"value":["38","E"]},{"value":["53","D"]},{"value":["57","C"]},{"value":["66","B"]},{"value":["80","A"]}],"name":"y","type":"pictorialBar","yAxisIndex":0,"xAxisIndex":0,"symbolRepeat":true,"z":-1,"symbolSize":[20,20],"symbol":"path://M59.3,52.2C65.8,48.2,70,40.3,70,33c0-10.4-8.5-22-20-22S30,22.6,30,33c0,7.3,4.2,15.2,10.7,19.2\r\n\t\tC25.3,56.3,14,70.4,14,87c0,1.1,0.9,2,2,2h68c1.1,0,2-0.9,2-2C86,70.4,74.7,56.3,59.3,52.2z M34,33c0-10.3,8.5-18,16-18\r\n\t\ts16,7.7,16,18s-8.5,18-16,18S34,43.3,34,33z M18.1,85c1-16.7,15-30,31.9-30s30.9,13.3,31.9,30H18.1z","label":{"show":true,"position":"right","fontSize":16,"fontWeight":"bold","offset":[10,0]}}],"title":[{"text":"People Icons"}]},"dispose":true},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>Unity &lt;- &quot;https://www.pngmart.com/files/2/Batman-PNG-Image.png&quot;

data &lt;- data.frame(
  x = c(&quot;Joker libre&quot;, &quot;Joker à arkam&quot;), 
  value = c(182, 129),
  symbol = c(paste0(&quot;image://&quot;, Unity),
             paste0(&quot;image://&quot;, Unity))
)

data %&gt;% 
  e_charts(x) %&gt;% 
  e_pictorial(value, symbol) %&gt;% 
  e_theme(&quot;westeros&quot;) %&gt;% 
  e_legend(FALSE) %&gt;% 
  # Title Alignment
  e_title(&quot;Gotham crimes graph&quot;, left=&#39;center&#39;, padding=10) %&gt;%
  e_labels(show=TRUE) %&gt;%
  e_x_axis(splitLine=list(show = FALSE)) %&gt;%
  e_y_axis(show=FALSE, min=0,max=200, interval=20, splitLine=list(show = FALSE))</code></pre>
<div id="htmlwidget-2" style="width:100%;height:500px;" class="echarts4r html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"theme":"westeros","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"yAxis":[{"show":false,"min":0,"max":200,"interval":20,"splitLine":{"show":false}}],"xAxis":[{"data":["Joker libre","Joker à arkam"],"type":"category","boundaryGap":true,"splitLine":{"show":false}}],"legend":{"data":["value"],"show":false,"type":"plain"},"series":[{"data":[{"value":["Joker libre","182"],"symbol":"image://https://www.pngmart.com/files/2/Batman-PNG-Image.png"},{"value":["Joker à arkam","129"],"symbol":"image://https://www.pngmart.com/files/2/Batman-PNG-Image.png"}],"name":"value","type":"pictorialBar","yAxisIndex":0,"xAxisIndex":0,"label":{"show":true,"position":"top"}}],"title":[{"left":"center","padding":10,"text":"Gotham crimes graph"}]},"dispose":true},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>df22 %&gt;% 
  e_charts(x) %&gt;% 
  e_pictorial(y, symbol = &quot;Licorne.svg&quot;, 
              symbolRepeat = TRUE) %&gt;% 
  e_theme(&quot;westeros&quot;) %&gt;%
  e_title(&quot;People Icons&quot;) %&gt;% 
  e_flip_coords() %&gt;%
  # Hide Legend
  e_legend(show = FALSE) %&gt;%
  # Remove Gridlines
  e_x_axis(splitLine=list(show = FALSE)) %&gt;%
  e_y_axis(splitLine=list(show = FALSE)) %&gt;%
  # Format Label
  e_labels(fontSize = 16, fontWeight =&#39;bold&#39;, position = &quot;right&quot;, offset=c(10, 0))</code></pre>
<div id="htmlwidget-3" style="width:100%;height:500px;" class="echarts4r html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"theme":"westeros","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"xAxis":[{"show":true,"splitLine":{"show":false}}],"yAxis":[{"data":["E","D","C","B","A"],"type":"category","boundaryGap":true,"splitLine":{"show":false}}],"legend":{"data":["y"],"show":false,"type":"plain"},"series":[{"data":[{"value":["38","E"]},{"value":["53","D"]},{"value":["57","C"]},{"value":["66","B"]},{"value":["80","A"]}],"name":"y","type":"pictorialBar","yAxisIndex":0,"xAxisIndex":0,"symbolRepeat":true,"symbol":"Licorne.svg","label":{"show":true,"position":"right","fontSize":16,"fontWeight":"bold","offset":[10,0]}}],"title":[{"text":"People Icons"}]},"dispose":true},"evals":[],"jsHooks":[]}</script>
<p>unit chart plus libre</p>
<p>Comme à chaque fois, commençons par charger le tidyverse.</p>
<p>Installation du package waffle. Attention, il est important ici d’installer la version la plus récente qui n’est pas sur le CRAN.</p>
<pre class="r"><code>#install.packages(&quot;waffle&quot;, repos = &quot;https://cinc.rud.is&quot;)</code></pre>
<p>vérifier que vous avez une version suffisamment avancée (supérieure à 1.0).</p>
<pre class="r"><code>packageVersion(&quot;waffle&quot;)</code></pre>
<pre><code>## [1] &#39;1.0.1&#39;</code></pre>
<pre class="r"><code>library(waffle)</code></pre>
<pre><code>## 
## Attachement du package : &#39;waffle&#39;</code></pre>
<pre><code>## Les objets suivants sont masqués depuis &#39;package:ggwaffle&#39;:
## 
##     geom_waffle, GeomWaffle</code></pre>
<pre class="r"><code>library(hrbrthemes)</code></pre>
<p>le premier gaphe un diagramme en gaufre simple prenons des données</p>
<pre class="r"><code>xdf&lt;- data.frame(
  parts = factor(rep(month.abb[1:3], 3), levels=month.abb[1:3]),
  vals = c(10, 20, 30, 6, 14, 40, 30, 20, 10),
  col = rep(c(&quot;blue&quot;, &quot;black&quot;, &quot;red&quot;), 3),
  fct = c(rep(&quot;Thing 1&quot;, 3),
          rep(&quot;Thing 2&quot;, 3),
          rep(&quot;Thing 3&quot;, 3)))
xdf</code></pre>
<pre><code>##   parts vals   col     fct
## 1   Jan   10  blue Thing 1
## 2   Feb   20 black Thing 1
## 3   Mar   30   red Thing 1
## 4   Jan    6  blue Thing 2
## 5   Feb   14 black Thing 2
## 6   Mar   40   red Thing 2
## 7   Jan   30  blue Thing 3
## 8   Feb   20 black Thing 3
## 9   Mar   10   red Thing 3</code></pre>
<p>table de fréquence</p>
<pre class="r"><code>tab_xdf&lt;-xdf %&gt;%
  count(parts, wt = vals)
tab_xdf</code></pre>
<pre><code>##   parts  n
## 1   Jan 46
## 2   Feb 54
## 3   Mar 80</code></pre>
<p>établissons le graphe</p>
<pre class="r"><code>ggplot(data=tab_xdf) + aes(fill = parts, values = n)+
  geom_waffle(n_rows = 20, size = 0.33, colour = &quot;white&quot;, flip = TRUE) +
  scale_fill_manual(
    name = NULL,
    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)) +
  coord_equal()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data=tab_xdf) + aes(fill = parts, values = n) +
  geom_waffle(n_rows = 20, size = 0.33, colour = &quot;white&quot;, flip = TRUE) +
  scale_fill_manual(name = NULL,
                    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
                    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)) +
  coord_equal() +
  theme_ipsum_rc(base_family=&#39;sans&#39;,grid=&quot;&quot;) +
  theme_enhance_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data=tab_xdf) + aes(fill = parts, values = n) +
  geom_waffle(n_rows = 20, size = 0.33, colour = &quot;white&quot;, flip = TRUE) +
  scale_fill_manual(name = NULL,
                    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
                    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)) +
  coord_equal() +
  theme_modern_rc(base_family=&#39;sans&#39;,grid=&quot;&quot;) +
  theme_enhance_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data=tab_xdf) + aes(fill = parts, values = n) +
  geom_waffle(n_rows = 20, size = 0.33, colour = &quot;white&quot;, flip = TRUE) +
  scale_fill_manual(name = NULL,
                    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
                    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)) +
  coord_equal() +
  theme_ft_rc(base_family=&#39;sans&#39;,grid=&quot;&quot;) +
  theme_enhance_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data=tab_xdf) + aes(fill = parts, values = n) +
  geom_waffle(n_rows = 20, size = 0.33, colour = &quot;white&quot;, flip = TRUE) +
  scale_fill_manual(name = NULL,
                    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
                    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)) +
  coord_cartesian() +
  theme_ipsum_rc(base_family=&#39;sans&#39;,grid=&quot;&quot;) +
  theme_enhance_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>les thèmes</p>
<pre class="r"><code>library(showtext)</code></pre>
<pre><code>## Le chargement a nécessité le package : sysfonts</code></pre>
<pre><code>## Le chargement a nécessité le package : showtextdb</code></pre>
<pre class="r"><code>font_add_google(&#39;Roboto Condensed&#39;)
showtext_auto()</code></pre>
<pre class="r"><code>ggplot(data=tab_xdf) + aes(fill = parts, values = n) +
  geom_waffle(n_rows = 20, size = 0.33, colour = &quot;white&quot;, flip = TRUE) +
  scale_fill_manual(name = NULL,
                    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
                    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)) +
  coord_equal() +
  theme_ipsum_rc(grid=&quot;&quot;) +
  theme_enhance_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>L’isotype préalable avant de faire avec des icones est de charger les polices
associées</p>
<p><a href="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/webfonts/fa-solid-900.ttf" class="uri">https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/webfonts/fa-solid-900.ttf</a>
<a href="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/webfonts/fa-regular-400.ttf" class="uri">https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/webfonts/fa-regular-400.ttf</a>
<a href="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/webfonts/fa-brands-400.ttf" class="uri">https://raw.githubusercontent.com/FortAwesome/Font-Awesome/master/webfonts/fa-brands-400.ttf</a></p>
<pre class="r"><code>library(showtext)
font_add(family = &quot;FontAwesome5Free-Solid&quot;,
         regular = &quot;C:\\Users\\ludov\\Downloads\\fa-solid-900.ttf&quot;)
font_add(family = &quot;FontAwesome5Free-Regular&quot;,
         regular = &quot;C:\\Users\\ludov\\Downloads\\fa-regular-400.ttf&quot;)
font_add(family = &quot;FontAwesome5Brands-Regular&quot;,
         regular = &quot;C:\\Users\\ludov\\Downloads\\fa-brands-400.ttf&quot;)
showtext_auto()</code></pre>
<p>lorsque vous</p>
<pre class="r"><code>p_1&lt;-ggplot(data=tab_xdf) + aes(label = parts, values = n) +
  geom_pictogram(n_rows = 10, aes(colour = parts),
                 flip = TRUE, make_proportional = TRUE) +
  scale_color_manual(
    name = NULL,
    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)
  ) +
  scale_label_pictogram(
    name = NULL,
    values = c(&quot;apple-alt&quot;, &quot;bread-slice&quot;, &quot;pizza-slice&quot;),
    labels = c(&quot;Fruit&quot;, &quot;Sammich&quot;, &quot;Pizza&quot;)
  ) +
  coord_equal() +
  theme_ipsum_rc(grid=&quot;&quot;) +
  theme_enhance_waffle() +
  theme(legend.key.height = unit(2.25, &quot;line&quot;)) +
  theme(legend.text = element_text(size = 10, hjust = 0, vjust = 0.75))
p_1</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre class="r"><code>fa_list()$x$data[1:10,1:2] </code></pre>
<pre><code>##                            name
## 1   1                     500px
## 2   2           accessible-icon
## 3   3                  accusoft
## 4   4 acquisitions-incorporated
## 5   5                        ad
## 6   6              address-book
## 7   7              address-card
## 8   8                    adjust
## 9   9                       adn
## 10 10                     adobe</code></pre>
<pre class="r"><code>fa_grep(&#39;ninja&#39;)$x$data</code></pre>
<pre><code>##                 name  type
## 1287 1287 user-ninja solid
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             glyph
## 1287 &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 448 512&quot; width=&quot;24&quot; height=&quot;24&quot;&gt;&lt;path d=&quot;M325.4 289.2L224 390.6 122.6 289.2C54 295.3 0 352.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-70.2-54-127.1-122.6-133.2zM32 192c27.3 0 51.8-11.5 69.2-29.7 15.1 53.9 64 93.7 122.8 93.7 70.7 0 128-57.3 128-128S294.7 0 224 0c-50.4 0-93.6 29.4-114.5 71.8C92.1 47.8 64 32 32 32c0 33.4 17.1 62.8 43.1 80-26 17.2-43.1 46.6-43.1 80zm144-96h96c17.7 0 32 14.3 32 32H144c0-17.7 14.3-32 32-32z&quot;/&gt;&lt;/svg&gt;</code></pre>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="24" height="24">
<path d="M325.4 289.2L224 390.6 122.6 289.2C54 295.3 0 352.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-70.2-54-127.1-122.6-133.2zM32 192c27.3 0 51.8-11.5 69.2-29.7 15.1 53.9 64 93.7 122.8 93.7 70.7 0 128-57.3 128-128S294.7 0 224 0c-50.4 0-93.6 29.4-114.5 71.8C92.1 47.8 64 32 32 32c0 33.4 17.1 62.8 43.1 80-26 17.2-43.1 46.6-43.1 80zm144-96h96c17.7 0 32 14.3 32 32H144c0-17.7 14.3-32 32-32z"/>
</svg>
<pre class="r"><code>p_2&lt;-ggplot(data=tab_xdf) + aes(label = parts, values = n) +
  geom_pictogram(n_rows = 10, aes(colour = parts),
                 flip = TRUE, make_proportional = TRUE) +
  scale_color_manual(
    name = NULL,
    values = c(&quot;#a40000&quot;, &quot;#c68958&quot;, &quot;#ae6056&quot;),
    labels = c(&quot;female&quot;, &quot;male&quot;, &quot;coffee&quot;)
  ) +
  scale_label_pictogram(
    name = NULL,
    values = c(&quot;female&quot;, &quot;male&quot;, &quot;coffee&quot;),
    labels = c(&quot;female&quot;, &quot;male&quot;, &quot;coffee&quot;)
  ) +
  coord_equal() +
  theme_ipsum_rc(grid=&quot;&quot;) +
  theme_enhance_waffle() +
  theme(legend.key.height = unit(2.25, &quot;line&quot;)) +
  theme(legend.text = element_text(size = 10, hjust = 0, vjust = 0.75))
p_2</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>intégrer plusieurs graphe dans un avec iron</p>
<pre class="r"><code>parts &lt;- c(80, 30, 20, 10)
w1 &lt;- waffle(parts, rows=8)
w2 &lt;- waffle(parts, rows=8)
w3 &lt;- waffle(parts, rows=8)
# print chart
iron(w1, w2, w3)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>avec facet</p>
<pre class="r"><code>tibble(
  parts = factor(rep(month.abb[1:3], 3), levels=month.abb[1:3]),
  values = c(10, 20, 30, 6, 14, 40, 30, 20, 10),
  fct = c(rep(&quot;Thing 1&quot;, 3), rep(&quot;Thing 2&quot;, 3), rep(&quot;Thing 3&quot;, 3))
) -&gt; xdf

ggplot(xdf, aes(fill=parts, values=values)) +
  geom_waffle(color = &quot;white&quot;, size=1.125, n_rows = 6) +
  facet_wrap(~fct, ncol=1) +
  scale_x_discrete(expand=c(0,0)) +
  scale_y_discrete(expand=c(0,0)) +
  ggthemes::scale_fill_tableau(name=NULL) +
  coord_equal() +
  labs(
    title = &quot;Faceted Waffle Geoms&quot;
  ) +
  theme_ipsum_rc(grid=&quot;&quot;) +
  theme_enhance_waffle()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>en vertical</p>
<pre class="r"><code>storms %&gt;% 
  filter(year &gt;= 2010) %&gt;% 
  count(year, status) -&gt; storms_df

ggplot(storms_df, aes(fill = status, values = n)) +
  geom_waffle(color = &quot;white&quot;, size = .25, n_rows = 10, flip = TRUE) +
  facet_wrap(~year, nrow = 1, strip.position = &quot;bottom&quot;) +
  scale_x_discrete() + 
  scale_y_continuous(labels = function(x) x * 10, # make this multiplyer the same as n_rows
                     expand = c(0,0)) +
  ggthemes::scale_fill_tableau(name=NULL) +
  coord_equal() +
  labs(
    title = &quot;Faceted Waffle Bar Chart&quot;,
    subtitle = &quot;{dplyr} storms data&quot;,
    x = &quot;Year&quot;,
    y = &quot;Count&quot;
  ) +
  theme_minimal(base_family = &quot;Roboto Condensed&quot;) +
  theme(panel.grid = element_blank(), axis.ticks.y = element_line()) +
  guides(fill = guide_legend(reverse = TRUE))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
